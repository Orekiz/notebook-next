---
title: 雷池防火墙社区版配置笔记
---

# 雷池防火墙社区版配置笔记

## 安装

需要Docker v20以上。

通过一键安装脚本:

```bash
bash -c "$(curl -fsSLk https://waf-ce.chaitin.cn/release/latest/setup.sh)"
```

## 登录

安装完成后，shell会输出初始化的用户名密码。
防火墙会运行在 `9443` 端口。

1. 进入运行在9443端口的管理应用。

2. 输入初始化的用户名密码

使用各类支持TOTP的身份验证软件（微软authenticator） 扫描生成的二维码。
拿到TOTP的TOKEN并输入进行绑定TOTP密钥。

## 配置站点

雷池防火墙是通过nginx反代来进行防护的。

用户请求 -> 雷池 -> 网站业务

配置的站点就是需要雷池进行防护的站点。

1. 进入 `防护站点-站点管理` 选项卡。

2. 新增站点

    域名：（雷池监听的端口）用户的请求进入雷池后，它按照用户请求的域名来判断进入的是哪个站点。
    端口：（雷池监听的域名的端口）用户请求的端口。
    上游服务器：代理的目的地。


### 说明


#### 域名问题

想要站点配置中的域名生效，需要将域名解析到雷池所在的服务器IP。

如果想要给雷池配置一个域名，则需要在站点配置中加入雷池自己。

#### TSL

反代目标业务可以是http，雷池可以通过监听443端口，然后申请带上证书。这样就通过反代了来实现HTTPS了。

::: warning
注意原网站业务如果有请求，而且API地址协议是http的话，就会不行。因为HTTPS只能请求HTTPS。可以给后端也上一层反代+TSL。
:::
